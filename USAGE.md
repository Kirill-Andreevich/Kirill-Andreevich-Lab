# Инструкция по управлению инфраструктурой

### Основной цикл
1. **Подготовка:** Отредактируйте `terraform/terraform.tfvars` и добавьте свои SSH-ключи.
2. **Развертывание:** Запустите `make all`. Это создаст виртуалки и накатит софт.
3. **Проверка:** Используйте `make ping`, чтобы убедиться, что Ansible видит все ноды.

### Описание таргетов Makefile
- `up`: Выполняет `terraform apply`. Создает 5 виртуалок (Master, Workers, GitLab).
- `provision`: Запускает цепочку плейбуков Ansible. Настраивает K8s v1.31.
- `down`: Полностью удаляет ресурсы. Полезно для экономии ресурсов на Zen 5, когда лаба не нужна.

### Troubleshooting
Если `make provision` падает по таймауту SSH — увеличьте `sleep` в Makefile или проверьте статус Cloud-Init на нодах.
