# üèó Kirill's Zen 5 Infrastructure Lab

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–µ–Ω–¥ –¥–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ IaC-–ø–æ–¥—Ö–æ–¥–æ–≤, —Ç—é–Ω–∏–Ω–≥–∞ –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è AI-—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –±–∞–∑–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã AMD Zen 5.

## üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è
**"One Button to Rule Them All"**: –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä–∞ –¥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Kubernetes –∏ Docker-—Å—Ä–µ–¥ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `make all`. 100% –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å, 0% —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

---

## üíª Hardware Topology (The Beast)
*–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –º–µ–∂–¥—É —Ç—Ä–µ–º—è —É–∑–ª–∞–º–∏ Zen 5 –≤ –æ–±—â–µ–π L2-—Å–µ—Ç–∏.*

*   **üöÄ Compute Node (Main):** Ryzen 9 9950X3D (32 threads) | RTX 4090 [GPU Passthrough] | 64GB DDR5.
*   **üñ• Workstation (Control):** Ryzen 7 9800X3D | RX 9070 XT | 32GB DDR5.
*   **üíæ Storage Node (Data):** Ryzen 7 9700X | TrueNAS SCALE | RAID-Z1.

---

## üõ† Tech Stack
*   **Infrastructure:** Terraform (Libvirt / QEMU / KVM).
*   **Configuration:** Ansible (Core-playbooks).
*   **Container Runtime:** Containerd v1.7.28 (SystemdCgroup).
*   **Orchestration:** Kubernetes v1.31 (Stable Repo).
*   **Automation:** GNU Makefile.

---

## üîß –ö–ª—é—á–µ–≤—ã–µ R&D –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–§–µ–≤—Ä–∞–ª—å 2026)

### 1. Kubernetes Provisioning (The "Yandex Mirror" Case) ‚úÖ
*   **–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ `pkgs.k8s.io` –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–≤–æ–µ—Ç–æ—á–∏—è –≤ –ø—É—Ç—è—Ö (`core:/stable:/`), —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç 404 –æ—à–∏–±–∫–∏ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–µ—Ä–∫–∞–ª–∞—Ö –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã APT.
*   **–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ **mirror.yandex.ru** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ¬´–ø–ª–æ—Å–∫–æ–π¬ª (flat) —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –ø—É—Ç–µ–π `/mirrors/pkgs.k8s.io/core/stable/v1.31/deb/`.
*   **GPG Security:** –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ `NO_PUBKEY 234654DA9A296436`. –ö–ª—é—á –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –∫–ª—é—á–µ–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É.

### 2. Runtime & Kernel Tuning ‚úÖ
*   **Containerd:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ —Å –≤–∫–ª—é—á–µ–Ω–∏–µ–º `SystemdCgroup = true` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã K8s –Ω–∞ —è–¥—Ä–∞—Ö 6.18+.
*   **Network:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `br_netfilter` –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `sysctl` (`ip_forward`) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ L2-–±—Ä–∏–¥–∂–∏–Ω–≥–∞ —Ç—Ä–∞—Ñ–∏–∫–∞.

### 3. Deep Automation (Terraform + Ansible) ‚úÖ
*   **Dynamic Inventory:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∫–≤–æ–∑–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö: Terraform –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `generated_hosts.ini` –Ω–∞ –ª–µ—Ç—É, –≤–∫–ª—é—á–∞—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ IPv4 –∏–∑ Proxmox.
*   **Zero-Downtime Workflow:** –í–Ω–µ–¥—Ä–µ–Ω `Makefile`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª `Destroy -> Create -> Provision` –∑–∞ **5-7 –º–∏–Ω—É—Ç**.

---

## üó∫ Infrastructure Evolution (Roadmap 2026)

### Phase 1: Foundation (COMPLETED ‚úÖ)
* [x] **IaC Core:** –ú–æ–¥—É–ª—å–Ω—ã–π Terraform –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 5-—é –Ω–æ–¥–∞–º–∏.
* [x] **Automated Bootstrap:** –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è Cloud-Init (20GB –¥–∏—Å–∫–∏, SSH, QEMU Agent).
* [x] **Binary Delivery:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ K8s v1.31 –∏ Docker —á–µ—Ä–µ–∑ Ansible.

### Phase 2: Orchestration & AI (NEXT STEP üèóÔ∏è)
* [ ] **Cluster Init:** –ó–∞–ø—É—Å–∫ `kubeadm init` –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CNI (Calico/Flannel).
* [ ] **GPU-Orchestration:** –ü—Ä–æ–±—Ä–æ—Å NVIDIA RTX 4090 –≤ K8s –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ LLM.
* [ ] **DeepSeek-R1 Deployment:** –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π AI-–º–æ–¥–µ–ª–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.

### Phase 3: CI/CD & Observability (Planned ‚è≥)
* [ ] **Self-hosted GitLab:** –î–µ–ø–ª–æ–π GitOps-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤.
* [ ] **Prometheus Stack:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Zen 5 —Ä–µ—Å—É—Ä—Å–æ–≤.

---
*Created with üß† by Kirill's Homelab Automation*
